class Solution {
public:
    int countHillValley(vector<int>& nums) {
        int n = nums.size() ;
        int cnt = 0 ;
        for(int i = 1; i < n-1; i++) {
            if(nums[i-1] == nums[i]) continue ;
            int j = i-1, k = i+1 ;
            while(j >= 0 && (nums[i] == nums[j])) j-- ;
            while(k < n && (nums[i] == nums[k])) k++ ;
            if(j < 0 || k > n-1) continue ;
            if(nums[j] < nums[i] && nums[i] > nums[k]) cnt++ ;
            else if(nums[j] > nums[i] && nums[i] < nums[k]) cnt++ ;
        }
        return cnt ;
    }
};
