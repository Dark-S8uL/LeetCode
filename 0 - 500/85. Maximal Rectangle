class Solution {
public:
    int maximalRectangle(vector<vector<char>>& mat) {
        int m = mat.size(), n = mat[0].size() ;
        if(m == 1 && n == 1) return mat[0][0] == '1' ;
        vector<int> v(n+1, 0) ; 
        int maxArea = 0 ;
        for(int i = 0; i < m; i++) {
            for(int j = 0; j < n; j++) v[j] = (mat[i][j] == '1') ? v[j] + 1 : 0 ;
            stack<int> st ;
            st.push(-1) ;
            for(int j = 0; j <= n; j++) {
                while(st.size() > 1 && (j == n || v[j] < v[st.top()])) {
                    int h = st.top() ; st.pop() ;
                    int w = j - st.top() - 1 ;
                    maxArea = max(maxArea, v[h] * w) ;
                }
                st.push(j) ;
            }
        }
        return maxArea ;
    }
};
